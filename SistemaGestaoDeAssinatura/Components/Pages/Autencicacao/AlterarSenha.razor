@page "/alterar-senha"
@layout LoginLayout
@attribute [Authorize(Policy = "TemporaryAuth")]

<PageTitle>Alterar Senha</PageTitle>

<RadzenCard Style="max-width: 500px; margin: 50px auto;">
    <RadzenStack Gap="1.5rem">
        <RadzenText TextStyle="TextStyle.H3" Align="TextAlign.Center">Alterar Senha</RadzenText>
        <RadzenText Align="TextAlign.Center" Style="color: #666;">Primeiro acesso - Por favor, altere sua senha</RadzenText>
        
        <EditForm Model="@alterarSenhaDTO" OnValidSubmit="@OnSubmit">
            <RadzenFieldset Text="Nova Senha">
                <RadzenStack Gap="1rem">
                    <RadzenFormField Text="Senha Atual" class="rz-col-12">
                        <RadzenPassword @bind-Value="@alterarSenhaDTO.SenhaAtual" Placeholder="Digite sua senha atual" style="width: 100%" />
                    </RadzenFormField>

                    <RadzenFormField Text="Nova Senha" class="rz-col-12">
                        <RadzenPassword @bind-Value="@alterarSenhaDTO.NovaSenha" Placeholder="Digite a nova senha (mÃ­nimo 6 caracteres)" style="width: 100%" />
                    </RadzenFormField>

                    <RadzenFormField Text="Confirmar Nova Senha" class="rz-col-12">
                        <RadzenPassword @bind-Value="@alterarSenhaDTO.ConfirmarNovaSenha" Placeholder="Confirme a nova senha" style="width: 100%" />
                    </RadzenFormField>

                    @if (!string.IsNullOrEmpty(mensagemErro))
                    {
                        <RadzenAlert AlertStyle="AlertStyle.Danger" Title="Erro" Text="@mensagemErro" />
                    }

                    @if (!string.IsNullOrEmpty(mensagemSucesso))
                    {
                        <RadzenAlert AlertStyle="AlertStyle.Success" Title="Sucesso" Text="@mensagemSucesso" />
                    }

                    <RadzenButton ButtonType="ButtonType.Submit" ButtonStyle="ButtonStyle.Primary" 
                                  Text="Salvar" Icon="save" class="rz-col-12" IsBusy="@carregando" />
                </RadzenStack>
            </RadzenFieldset>
        </EditForm>
    </RadzenStack>
</RadzenCard>
